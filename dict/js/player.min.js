!function(){class t{constructor(t,e={}){if(this.container=document.querySelector(t),!this.container)throw new Error("Container not found");this.options={src:"",type:"video/mp4",captions:[],theme:"light",autoplay:!1,controls:!0,preload:"metadata",...e},this.init()}init(){this.createVideoElement(),this.applyTheme(),this.loadStream(),this.createControls(),this.bindEvents()}createVideoElement(){this.video=document.createElement("video"),Object.assign(this.video,{src:"video/mp4"===this.options.type?this.options.src:"",autoplay:this.options.autoplay,preload:this.options.preload}),this.container.appendChild(this.video),this.options.captions.forEach((t=>{const e=document.createElement("track");Object.assign(e,t),this.video.appendChild(e)}))}applyTheme(){this.container.classList.add(`custom-player-${this.options.theme}`)}createControls(){const t=document.createElement("div");t.className="custom-player-controls";const e=document.createElement("button");e.textContent="▶",t.appendChild(e);const o=document.createElement("div");o.className="progress-bar",t.appendChild(o),this.container.appendChild(t),this.controls={playPause:e,progressBar:o}}loadStream(){"application/x-mpegURL"===this.options.type?this.loadHLS():"application/dash+xml"===this.options.type&&this.loadDASH()}loadHLS(){Hls.isSupported()?(new Hls).loadSource(this.options.src).attachMedia(this.video):this.video.src=this.options.src}loadDASH(){dashjs.MediaPlayer().create().initialize(this.video,this.options.src,!0)}bindEvents(){const{playPause:t,progressBar:e}=this.controls;t.addEventListener("click",(()=>{this.video.paused?(this.video.play(),t.textContent="⏸"):(this.video.pause(),t.textContent="▶")})),this.video.addEventListener("timeupdate",(()=>{const t=this.video.currentTime/this.video.duration*100;e.style.width=`${t}%`}))}}window.CustomPlayer=t}();
